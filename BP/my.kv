<Manager>:
    MainWindow:
    ScanWindow:
    ResponseWindow:
    PatientDetails:

<MainWindow>:
    name: "Main"
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            size_hint_y: None
            height: 80
            canvas.before:
                Color:
                    rgba: (210/255,210/255,207/255,1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                text: "ELECTRONIC BP MONITORING SYSTEM"
                size_hint_x: 1
                font_size: 18
                bold:True
                color: (0,0,0,1)

        Label:
            id: sp1
            size_hint_x: None
            height: 40
        Button:
            bold: True
            text: "CLICK TO SCAN ID"
            font_size: 25
            pos_hint: {"center_x": 0.5, "center_y": .5}
            size_hint_x: .7
            size_hint_y: None
            color: (0,0,0,1)
            background_color: (210/255,210/255,207/255,1)
            background_normal: ""
            height:100
            on_press:
                app.root.current = "Scan"
                root.manager.transition.direction = "left"
                root.manager.get_screen("Scan").ids["textFocus"].focus = True

        Label:
            id: sp2

<ScanWindow>:
    name: "Scan"
    spacing: 20
    on_enter:
        root.enter()
#        root.On_LED()

    on_leave:
#        root.Off_LED()
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        BoxLayout:
            size_hint_y: None
            height: 80
            canvas.before:
                Color:
                    rgba: (210/255,210/255,207/255,1)
                Rectangle:
                    size: self.size
                    pos: self.pos

            Button:
                size_hint_x: .2
                font_size: 18
                bold:True
                color: (0,0,0,1)
                background_color: (210/255,210/255,207/255,1)
                background_normal: "images/back.png"
                on_press:
                    app.root.current = "Main"
                    root.manager.transition.direction = "right"


            Label:
                text: "CAPTURE DEMOGRAPHIC DATA"
                color: (0,0,0,1)
                size_hint_x: .8
                bold: True
                font_size: 18

        Label:
            text: "Scan National ID to capture demographic data"
            font_size:20
            bold: True
            pos_hint: {"center_x": 0.5, "center_y": .5}
            size_hint_x: .7
            size_hint_y: None
            color: (0,0,0,1)
            background_color: (1,1,1,1)
            background_normal: ""
            height:50

        Image:
            source: "images/id.jpeg"
            size_hint: (.7, .8)
            pos_hint: {"center_x": 0.5}

        TextInput:
            id: textFocus
            opacity: 0
            cursor_blink: False
            cursor_color: (210/255,210/255,207/255,1)
            size_hint: .6,.1
            multiline: False
            pos_hint: {"center_x": 0.5, "centre_y":0.7}
            on_text_validate:
                root.callback()

        Label:
            id: ss
        Label:
            text: "Insert ID here"
            bold: True
            size_hint_x: .7
            font_size:20
            size_hint_y: None
            height: 40
            pos_hint: {"center_x": 0.5, "center_y": .5}
            color: (0,0,0,1)

        Image:
            padding: 10
            source: "images/fast-forward.png"
            size_hint: (.5, .3)
            pos_hint: {"center_x": 0.5}




<PatientDetails>:
    name: "Patient_Details"
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            size_hint_y: None
            height: 80
            canvas.before:
                Color:
                    rgba: (210/255,210/255,207/255,1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                text: "CAPTURE BP VITALS"
                size_hint_x: 1
                bold:True
                color: (0,0,0,1)
                background_normal: ""
                background_color: (210/255,210/255,207/255,1)
        GridLayout:
            cols: 1
            GridLayout:
                cols:2
                Label:
                    color: (0,0,0,1)
                    text: "ID:"
                    font_size: "20dp"
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                    padding_x: 20

                Label:
                    color: (0,0,0,1)
                    id: N_id
                    font_size: "20dp"
                    bold:True
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                Label:
                    text: "Full name:"
                    font_size: "20dp"
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                    padding_x: 20
                Label:
                    id: f_name
                    font_size: "20dp"
                    bold:True
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                Label:
                    text: "Gender"
                    font_size: "20dp"
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                    padding_x: 20
                Label:
                    id: gender
                    font_size: "20dp"
                    bold:True
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                Label:
                    text: "Date Of Birth"
                    font_size: "20dp"
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                    padding_x: 20
                Label:
                    id: dob
                    font_size: "20dp"
                    bold:True
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    valign: "middle"
                Label:
                    id:bp
                    color: (0,0,0,1)
                    text_size: self.size
                    halign: "left"
                    text: "BP"
                    font_size: "20dp"
                    valign: "middle"
                    padding_x: 20
                Label:
                    id: bpValue
                    color: (0,0,0,1)
                    text: "Waiting for BP Vitals..."
                    text_size: self.size
                    bold: True
                    font_size: "20dp"
                    halign: "left"
                    valign: "middle"

            Label:
                text: "Press The Start Button on the Bp Machine to Start"
                size_hint: (.2, .2)
                color: (0,0,0,1)
        BoxLayout:
            size_hint_y: None
            height: 40
            padding: 50
            spacing: 100
            Button:
                text: "Restart"
                padding:  [20,10]
                size_hint_x: .2
                size_hint_y: None
                height: 40
                pos_hint: {"center_x": 0.5, "center_y":0.2}
                on_press:
                    root.enter()
                    app.root.current = "Scan"
                    root.manager.transition.direction = "right"

            Button:
                id: takeBP
                text: "Take BP"
                size_hint_x: .2
                size_hint_y: None
                opacity: 1
                height: 40
                pos_hint: {"center_x": 0.5, "center_y":0.2}
                on_press:
                    root.generate_BP()

<ResponseWindow>:
    name: "Response"
    on_enter: root.compose_response()
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            size_hint_y: None
            height: 80
            canvas.before:
                Color:
                    rgba: (210/255,210/255,207/255,1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                text: "RESPONSE WINDOW"
                font_size: 18
                size_hint_x: 1
                bold:True
                color: (0,0,0,1)

        Label:
            text: "Response"
            bold: True
            font_size: 20
            color: (0,0,0,1)
            size_hint: .2,.4
            pos_hint: {"center_x": 0.5}

        TextInput:
            multiline: True
            id: response
            font_size: 20
            size_hint_x: .7
            size_hint_y: None
            height: 150
            pos_hint: {"center_x":0.5}

        Label:
            text: "Recommendation"
            bold: True
            font_size: 20
            size_hint: .2,.4
            color: (0,0,0,1)
            pos_hint: {"center_x":0.5}


        TextInput:
            multiline: True
            id: comment
            font_size: 20
            size_hint_x: .7
            size_hint_y: None
            height: 150
            pos_hint: {"center_x":0.5}

        Label:
            size_hint:.2,.4
            pos_hint:{"center_x": 0.5}

        Button:
            text: "Finish"
            padding:  [20,10]
            size_hint_x: .4
            size_hint_y: None
            height: 40
            pos_hint: {"center_x": 0.5, "center_y":0.2}
            on_press:
                root.enter()
                app.root.current = "Main"

        Label:
            id: bottom


